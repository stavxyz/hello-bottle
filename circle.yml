# circle.yml
# $APP_NAME is the name of the app
# $CIRCLE_SHA1 will be filled in automatically by CircleCI.
# $DOCKER_EMAIL, $DOCKER_USER, $DOCKER_PASS must be set with the
# Quay robot account creds in the CircleCI env vars.
machine:
  python:
    version: 2.7.10
  services:
    - docker

dependencies:
  override:
    - wget https://releases.rancher.com/compose/beta/v0.5.2/rancher-compose-linux-amd64-v0.5.2.tar.gz
    - tar -xvzf rancher-compose-linux-amd64-v0.5.2.tar.gz

test:
  override:
    - nosetests -v

deployment:
  pull_requests:
    branch: /pull\/.*/
    commands:
      - env
      - ./rancher-compose-v0.5.2/rancher-compose -p ${CIRCLE_BRANCH} up
